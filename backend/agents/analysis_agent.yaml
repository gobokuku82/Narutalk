# Analysis Agent Configuration
# ê±°ë˜ì²˜ ì‹¤ì , ê°œì¸ ì‹¤ì  ë“± ìˆ«ìì™€ ê´€ë ¨ëœ ì •ë³´ ê²€ìƒ‰ ë° ë¶„ì„

agent:
  name: "analysis_agent"
  display_name: "ë°ì´í„° ë¶„ì„ ì—ì´ì „íŠ¸"
  version: "1.0.0"
  description: "ì œì•½íšŒì‚¬ ì‹¤ì  ë°ì´í„° ë¶„ì„ ë° í†µê³„ ì²˜ë¦¬ ì „ë¬¸ ì—ì´ì „íŠ¸"
  icon: "ğŸ“Š"
  color: "#4A90E2"

# ì—ì´ì „íŠ¸ ëŠ¥ë ¥ ì •ì˜
capabilities:
  text2sql:
    confidence: 0.95
    description: "ìì—°ì–´ë¥¼ SQL ì¿¼ë¦¬ë¡œ ë³€í™˜"
    supported_databases:
      - postgresql
      - mysql
      - oracle
    features:
      - complex_joins
      - aggregations
      - window_functions
      - subqueries
    max_tables: 10
    
  statistical_analysis:
    confidence: 0.90
    description: "í†µê³„ ë¶„ì„ ë° ì¸ì‚¬ì´íŠ¸ ë„ì¶œ"
    methods:
      - descriptive_statistics
      - regression_analysis
      - time_series_analysis
      - correlation_analysis
      - comparative_analysis
      - trend_analysis
      - yoy_comparison
      - mom_comparison
      
  data_visualization:
    confidence: 0.85
    description: "ë°ì´í„° ì‹œê°í™” ë° ì°¨íŠ¸ ìƒì„±"
    chart_types:
      - line_chart
      - bar_chart
      - pie_chart
      - scatter_plot
      - heatmap
      - waterfall_chart
      - combo_chart
      
  calculation:
    confidence: 0.98
    description: "ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì‚° ìˆ˜í–‰"
    functions:
      - growth_rate
      - market_share
      - achievement_rate
      - moving_average
      - forecast
      - variance_analysis

# íŠ¸ë¦¬ê±° ì¡°ê±´
triggers:
  keywords:
    high_priority:
      - "ë¶„ì„"
      - "í†µê³„"
      - "ì‹¤ì "
      - "ë§¤ì¶œ"
      - "ì„±ê³¼"
      - "ì¶”ì´"
      - "ë¹„êµ"
      - "ë‹¬ì„±ë¥ "
      
    medium_priority:
      - "ë°ì´í„°"
      - "ìˆ˜ì¹˜"
      - "ê·¸ë˜í”„"
      - "ì°¨íŠ¸"
      - "ë³´ê³ "
      - "í˜„í™©"
      
    contextual:
      - "ì‘ë…„ ëŒ€ë¹„"
      - "ì „ì›” ëŒ€ë¹„"
      - "ì „ë¶„ê¸° ëŒ€ë¹„"
      - "YoY"
      - "MoM"
      - "QoQ"
      - "ê±°ë˜ì²˜ë³„"
      - "ì œí’ˆë³„"
      - "ë‹´ë‹¹ìë³„"
      
  patterns:
    - pattern: ".*ê±°ë˜ì²˜.*ì‹¤ì .*"
      confidence_boost: 0.3
      priority: "high"
      
    - pattern: ".*ê°œì¸.*ì‹¤ì .*"
      confidence_boost: 0.3
      priority: "high"
      
    - pattern: ".*ë§¤ì¶œ.*ë¶„ì„.*"
      confidence_boost: 0.25
      priority: "high"
      
    - pattern: ".*ëª©í‘œ.*ë‹¬ì„±.*"
      confidence_boost: 0.2
      priority: "medium"
      
    - pattern: ".*ì „ë…„.*ë™ê¸°.*"
      confidence_boost: 0.2
      priority: "medium"

# ì‚¬ìš© ì˜ˆì‹œ
examples:
  - query: "Aê±°ë˜ì²˜ì˜ ì§€ë‚œ ë¶„ê¸° ì‹¤ì ì„ ë¶„ì„í•´ì¤˜"
    intent: "customer_performance_analysis"
    required_params:
      - customer_name: "Aê±°ë˜ì²˜"
      - time_period: "last_quarter"
    expected_output: "ê±°ë˜ì²˜ ì‹¤ì  ë¶„ì„ ë¦¬í¬íŠ¸"
    
  - query: "ê¹€ì˜ì—… ë‹´ë‹¹ìì˜ ì˜¬í•´ ì‹¤ì  ì¶”ì´ë¥¼ ë³´ì—¬ì¤˜"
    intent: "salesperson_trend_analysis"
    required_params:
      - salesperson_name: "ê¹€ì˜ì—…"
      - time_period: "this_year"
    expected_output: "ê°œì¸ ì‹¤ì  ì¶”ì´ ì°¨íŠ¸"
    
  - query: "ì „ì²´ ì œí’ˆêµ°ë³„ YoY ì„±ì¥ë¥  ë¹„êµ"
    intent: "product_growth_comparison"
    required_params:
      - product_scope: "all"
      - comparison_type: "YoY"
    expected_output: "ì œí’ˆë³„ ì„±ì¥ë¥  ë¹„êµ ë¶„ì„"
    
  - query: "ìƒìœ„ 10ê°œ ê±°ë˜ì²˜ì˜ ë§¤ì¶œ ê¸°ì—¬ë„ ë¶„ì„"
    intent: "top_customer_contribution"
    required_params:
      - customer_count: 10
      - metric: "revenue_contribution"
    expected_output: "ê±°ë˜ì²˜ë³„ ë§¤ì¶œ ê¸°ì—¬ë„ ì°¨íŠ¸"

# ì‹¤í–‰ ì„¤ì •
execution:
  timeout: 30
  max_retries: 3
  retry_delay: 2
  parallel_capable: true
  batch_processing: true
  cache_ttl: 300  # 5 minutes
  
  requires_approval:
    - action: "delete_data"
      reason: "ë°ì´í„° ì‚­ì œëŠ” ìŠ¹ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤"
    - action: "modify_database"
      reason: "ë°ì´í„°ë² ì´ìŠ¤ ìˆ˜ì •ì€ ìŠ¹ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤"
    - action: "export_sensitive_data"
      reason: "ë¯¼ê° ë°ì´í„° ì¶”ì¶œì€ ìŠ¹ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤"

# ë°ì´í„° ì†ŒìŠ¤
data_sources:
  primary:
    - name: "sales_db"
      type: "postgresql"
      tables:
        - sales_transactions
        - customer_master
        - product_master
        - salesperson_master
      refresh_interval: 3600
      
    - name: "performance_db"
      type: "postgresql"
      tables:
        - monthly_performance
        - quarterly_targets
        - achievement_tracking
      refresh_interval: 86400
      
  secondary:
    - name: "excel_reports"
      type: "file"
      formats: ["xlsx", "csv"]
      location: "/data/reports/"

# ì‚¬ìš© ë„êµ¬
tools:
  required:
    - text2sql_generator
    - sql_executor
    - data_analyzer
    - chart_generator
    - calculation_engine
    
  optional:
    - ml_predictor
    - anomaly_detector
    - report_formatter

# í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
prompts:
  system: |
    ë‹¹ì‹ ì€ ì œì•½íšŒì‚¬ì˜ ë°ì´í„° ë¶„ì„ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
    ê±°ë˜ì²˜ ì‹¤ì , ê°œì¸ ì‹¤ì , ë§¤ì¶œ ë°ì´í„° ë“±ì„ ì •í™•í•˜ê²Œ ë¶„ì„í•˜ê³  ì¸ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
    
    í•µì‹¬ ì—­í• :
    1. ìì—°ì–´ ì§ˆì˜ë¥¼ SQLë¡œ ë³€í™˜í•˜ì—¬ ë°ì´í„° ì¶”ì¶œ
    2. ì¶”ì¶œëœ ë°ì´í„°ì— ëŒ€í•œ í†µê³„ ë¶„ì„ ìˆ˜í–‰
    3. ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì‚¬ì´íŠ¸ ë„ì¶œ
    4. ì‹œê°í™”ë¥¼ í†µí•œ ì´í•´ë„ í–¥ìƒ
    
    ì¤€ìˆ˜ ì‚¬í•­:
    - ì •í™•ì„±: ë°ì´í„°ì˜ ì •í™•ì„±ì„ ìµœìš°ì„ ìœ¼ë¡œ í•©ë‹ˆë‹¤
    - ëª…í™•ì„±: ë³µì¡í•œ ë¶„ì„ë„ ì´í•´í•˜ê¸° ì‰½ê²Œ ì„¤ëª…í•©ë‹ˆë‹¤
    - ì‹¤ìš©ì„±: ì‹¤ë¬´ì— ì§ì ‘ í™œìš© ê°€ëŠ¥í•œ ì¸ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤
    - ë³´ì•ˆì„±: ë¯¼ê° ë°ì´í„°ëŠ” ì ì ˆíˆ ë§ˆìŠ¤í‚¹í•©ë‹ˆë‹¤
    
  user_context: |
    ì‚¬ìš©ì: {user_name} ({user_role})
    ë¶€ì„œ: {department}
    ê¶Œí•œ ë ˆë²¨: {permission_level}
    
  analysis_template: |
    ## ë¶„ì„ ìš”ì²­: {query}
    
    ### 1. ë°ì´í„° ì¶”ì¶œ
    ```sql
    {generated_sql}
    ```
    
    ### 2. ë¶„ì„ ê²°ê³¼
    {analysis_results}
    
    ### 3. ì£¼ìš” ì¸ì‚¬ì´íŠ¸
    {key_insights}
    
    ### 4. ì¶”ì²œ ì•¡ì…˜
    {recommendations}

# ì¶œë ¥ í˜•ì‹
output_formats:
  default: "structured_report"
  
  options:
    structured_report:
      sections:
        - summary
        - detailed_analysis
        - charts
        - recommendations
        
    dashboard:
      components:
        - kpi_cards
        - trend_charts
        - comparison_tables
        - insights_panel
        
    raw_data:
      format: "json"
      include_metadata: true

# ì„±ëŠ¥ ë©”íŠ¸ë¦­
performance_metrics:
  sla:
    response_time: 5000  # ms
    accuracy_target: 0.95
    availability: 0.999
    
  tracking:
    - query_count
    - avg_response_time
    - error_rate
    - cache_hit_rate
    - user_satisfaction

# ì—ëŸ¬ ì²˜ë¦¬
error_handling:
  strategies:
    sql_error:
      retry: true
      fallback: "simplified_query"
      user_message: "ì¿¼ë¦¬ë¥¼ ë‹¨ìˆœí™”í•˜ì—¬ ì¬ì‹œë„í•©ë‹ˆë‹¤"
      
    timeout_error:
      retry: false
      fallback: "cached_result"
      user_message: "ì²˜ë¦¬ ì‹œê°„ì´ ì´ˆê³¼ë˜ì–´ ìºì‹œëœ ê²°ê³¼ë¥¼ ì œê³µí•©ë‹ˆë‹¤"
      
    data_not_found:
      retry: false
      fallback: "alternative_source"
      user_message: "ìš”ì²­í•œ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ ëŒ€ì²´ ì†ŒìŠ¤ë¥¼ í™•ì¸í•©ë‹ˆë‹¤"

# í•™ìŠµ ë° ê°œì„ 
learning:
  feedback_collection: true
  
  improvement_areas:
    - sql_generation_accuracy
    - insight_relevance
    - visualization_effectiveness
    
  auto_optimization:
    enabled: true
    frequency: "weekly"
    metrics_threshold:
      accuracy: 0.9
      user_satisfaction: 4.0
